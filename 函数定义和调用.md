# 函数定义和调用

**执行上下文**

1.函数每调用一次，就会创建一个新的执行上下文

2.函数**执行结束**，相应的**执行上下文销毁**

3.执行上下文栈**按照函数的调用顺序**来管理执行上下文

4.栈底永远是全局上下文，栈顶是当前正在执行的函数

5.每个执行上下文都有一个与之关联的**变量对象**（variable object）和一个**作用域链**（scope chain）

**调用栈**（Call Stack）
1.代码执行时JavaScript 引擎会以栈的方式来**处理和追踪**函数调用
2.**栈底**对应的是**全局**上下文环境，而**栈顶**对应的是**当前正在执行**的上下文环境

 **return 语句的作用**
1.返回值
2.终止函数的执行（销毁当前执行上下文，弹出调用栈）

**变量对象**
1.函数的所有形参
2.所有函数声明
3.所有变量声明

**声明提升**
 JavaScript 引擎把所有的变量声明和函数声明提升到当前作用域的最前面
 规则1：函数声明整体提前（注意：函数表达式）
 规则2：变量声明提前，赋值留在原地
 规则3：函数会首先被提升，然后才是变量（重复的 var 声明会被忽略，函数声明可以覆盖前面的）

**预编译（预解析）：** 1.JavaScript代码的整个执行过程，执行每一段代码之前，都有一个“预编译”

                                       2.  JavaScript代码的整个执行过程，分为两个阶段，代码编译阶段（由编译器完成，将代码翻译成可执行代码）与代码执行阶段（由引擎完成，主要任务是执行可执行代码，执行上下文在这个阶段创建。）
                                       3. 作用：**声明提升**

**声明提升：**JavaScript 引擎把所有的变量声明和函数声明提升到当前作用域的最前面
                      规则1：函数声明整体提前（注意：函数表达式）
                      规则2：变量声明提前，赋值留在原地
                      规则3：函数会首先被提升，然后才是变量（注意：重复的 var 声明会被忽略，函数声明可以覆盖前面的）

**活动对象（Activation Object）：**执行阶段的变量对象

**浏览器中的全局上下文的变量对象：**1.变量对象就是 window 对象
                                                              2.不会变成活动对象
                                                               3.在页面关闭前一直存在

**作用域：** 1.作用域就是**变量与函数**的**可访问范围**
                 2.作用域控制着变量与函数的**可见性和生命周期**

**作用域类型：**1.全局作用域
                       2.函数作用域
                       3.块作用域   { } 中的语句集都属于一个块

**词法作用域：**1.通过 new Function 创建的函数对象不遵从静态词法作用域
                       2.通过 new Function 创建的函数对象总是在全局作用域中执行

**作用域嵌套 —— 变量查找：**1.作用域查找会在找到**第一个匹配的标识符**时停止
                                                2.作用域查找只会找一级标识符

**作用域链（Scope Chain）：**1.由当前执行环境与上层（父级）执行环境的一系列变量对象组成
                                                  2.提供对变量和函数访问的权限和顺序的规则

**作用域链与执行上下文：**1.执行时，当前执行上下文，对应一个作用域链环境来管理和解析变量和函数（动态性）
                                           2.变量查找按照**由内到外**的顺序（遵循词法作用域），直到完成查找，若未查询到则报错
                                           3.当函数执行结束，运行期上下文被销毁，此作用域链环境也随之被释放

**[[scope]] 属性：**1. 虚拟属性，无法访问和修改

​                            2.函数创建（定义）时生成的属性，保存着这个函数的父作用域的作用域链。